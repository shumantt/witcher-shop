(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],u=0,m=[];u<o.length;u++)r=o[u],a[r]&&m.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0232":function(t,e,s){},"09a8":function(t,e,s){"use strict";var n=s("27e6"),a=s.n(n);a.a},1203:function(t,e,s){},"12d1":function(t,e,s){},"1c60":function(t,e,s){t.exports=s.p+"img/witcher-face.f5d755f3.jpg"},"1dfc":function(t,e,s){},"25cf":function(t,e,s){"use strict";var n=s("fcaa"),a=s.n(n);a.a},"26aa":function(t,e,s){"use strict";var n=s("1dfc"),a=s.n(n);a.a},"27e6":function(t,e,s){},"2bbc":function(t,e,s){"use strict";var n=s("abfc"),a=s.n(n);a.a},3602:function(t,e,s){"use strict";var n=s("5018"),a=s.n(n);a.a},4678:function(t,e,s){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return s(e)}function i(t){var e=n[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="4678"},5018:function(t,e,s){},"54cb":function(t,e,s){"use strict";var n=s("589a"),a=s.n(n);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container"},[s("md-app",[s("md-app-drawer",{attrs:{"md-permanent":"full"}},[s("Menu")],1),s("md-app-content",[s("router-view")],1)],1)],1)},o=[],c=(s("1c60"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"resource-container"},[s("div",{staticClass:"text-search"},[s("div",{staticClass:"md-layout "},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-icon",[t._v("search")]),s("md-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterRecipes()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-button",{staticClass:"md-raised",on:{click:t.filterRecipes}},[t._v("Искать")]),t.isWorker?s("md-button",{staticClass:"md-raised",on:{click:t.addRecipe}},[t._v("Добавить рецепт")]):t._e()],1)])]),s("div",{staticClass:"search-options"},[s("div",{staticClass:"md-layout "},[s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("label",{attrs:{for:"category"}},[t._v("Категория")]),s("md-select",{attrs:{name:"category",id:"category"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[s("md-option",{attrs:{value:""}},[t._v("Все")]),s("md-option",{attrs:{value:"Несмертельные"}},[t._v("Несмертельные")]),s("md-option",{attrs:{value:"Смертельные"}},[t._v("Смертельные")]),s("md-option",{attrs:{value:"Усиливающие"}},[t._v("Усиливающие")])],1)],1)],1)])]),s("div",{staticClass:"table-container"},[s("md-table",{staticClass:"main-table",on:{"md-selected":t.onSelect},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{staticClass:"md-primary",attrs:{"md-selectable":"single"}},[s("md-table-cell",{attrs:{"md-label":"Ресурсы"}},[s("md-checkbox",{staticClass:"md-primary",attrs:{disabled:""},model:{value:n.enoughResources,callback:function(e){t.$set(n,"enoughResources",e)},expression:"item.enoughResources"}})],1),s("md-table-cell",{attrs:{"md-label":"Название"}},[t._v(t._s(n.name))]),s("md-table-cell",{attrs:{"md-label":"Категория"}},[t._v(t._s(n.categories[0]))]),s("md-table-cell",{attrs:{"md-label":"Компоненты"}},[t._v(t._s(n.components))]),s("md-table-cell",{attrs:{"md-label":"На складе"}},[t._v(t._s(n.quantity))])],1)}}]),model:{value:t.filteredRecipes,callback:function(e){t.filteredRecipes=e},expression:"filteredRecipes"}})],1),t.selected?s("div",{staticClass:"selected-info"},[s("md-card",[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v(t._s(t.selected.name))]),s("div",{staticClass:"md-subhead"},[t._v(t._s(t.selected.category))])])],1),s("md-card-content",[t._v("\n                "+t._s(t.selected.components)+"\n            ")]),s("md-card-actions",[s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.cookClick()}}},[t._v("Приготовить")]),s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.moreClick()}}},[t._v("Подробнее")])],1)],1)],1):t._e(),s("md-dialog",{attrs:{"md-active":t.successCook},on:{"update:mdActive":function(e){t.successCook=e},"update:md-active":function(e){t.successCook=e}}},[s("div",{staticClass:"modal-content"},[s("div",[t._v("Зелье приготовлено успешно.")]),s("div",[t._v("Количество зелья на складе обновилось.")])]),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.successCook=!1}}},[t._v("Ок")])],1)],1)],1)}),l=[],d=(s("7f7f"),s("6762"),s("2fdb"),{name:"Receipts",mounted:function(){this.fetchRecipes()},data:function(){return{category:null,searchText:null,includeSimple:!0,includeEnchanted:!0,includeEnoughResources:!0,selected:null,recipes:[],filteredRecipes:[],successCook:!1,isWorker:this.$store.getters.isWorker}},computed:{},methods:{onSelect:function(t){this.selected=t},filterRecipes:function(){var t=this,e=this.recipes.slice(0);this.category&&(e=e.filter(function(e){return e.category==t.category})),this.searchText&&(e=e.filter(function(e){return e.name.includes(t.searchText)})),this.filteredRecipes=e},fetchRecipes:function(){var t=this;this.$store.dispatch("fetchRecipes").then(function(e){t.recipes=e,t.filterRecipes()}).catch(console.log)},cookClick:function(){var t=this;this.$store.dispatch("cookPotion",this.selected.id).then(function(e){t.successCook=!0,t.fetchRecipes()}).catch(console.log)},moreClick:function(){this.$router.push("/info?type=receipts&id=".concat(this.selected.id))},addRecipe:function(){this.$router.push("/receipts/add")}}}),u=d,m=(s("2bbc"),s("2877")),f=Object(m["a"])(u,c,l,!1,null,"0cbfed5e",null),p=f.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"consumption-form"},[s("div",{staticClass:"md-title"},[t._v("Расход/приход ресурса")]),s("ResourceSelection",{ref:"selector",on:{"quantity-change":t.quantityChanged,"type-change":t.typeChanged,"name-change":t.nameChanged,"id-change":t.idChanged}}),s("div",{staticClass:"buttons-row"},[s("md-button",{staticClass:"md-raised left",attrs:{disabled:!t.actionEnabled},on:{click:function(e){return t.makeConsumption()}}},[t._v("Записать расход")]),s("md-button",{staticClass:"md-raised right",attrs:{disabled:!t.actionEnabled},on:{click:function(e){return t.addResource()}}},[t._v("Записать приход")])],1),t.resultMessage?s("div",[t._v(t._s(t.resultMessage))]):t._e()],1)},v=[],b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"category selection"},[s("div",{staticClass:"md-layout"},[t._m(0),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{attrs:{name:"category",id:"category","md-selected":t.typeSelected()},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[s("md-option",{attrs:{value:"grass"}},[t._v("Травы")]),s("md-option",{attrs:{value:"animals"}},[t._v("Животные")]),s("md-option",{attrs:{value:"runes"}},[t._v("Руны")])],1)],1)],1)])]),s("div",{staticClass:"name selection"},[s("div",{staticClass:"md-layout"},[t._m(1),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{attrs:{"md-selected":t.selectedName()},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},t._l(t.names,function(e){return s("md-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1)],1)])]),s("div",{staticClass:"quantity selection"},[s("div",{staticClass:"md-layout"},[t._m(2),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-input",{attrs:{type:"number",min:1,max:100},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1)],1)])])])},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Категория")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Наименование")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Количество")])])}],_=(s("7514"),{name:"ResourceSelection",data:function(){return{type:"",prevType:"",name:"",prevName:"",id:-1,quantity:1,grass:[],animals:[],runes:[],selectedValues:[],names:[]}},watch:{quantity:function(t){this.$emit("quantity-change",t)}},mounted:function(){var t=this;this.$store.dispatch("fetchAnimals").then(function(e){t.animals=e}).catch(function(t){return console.log(t)}),this.$store.dispatch("fetchGrass").then(function(e){t.grass=e||[]}).catch(function(t){return console.log(t)}),this.$store.dispatch("fetchRunes").then(function(e){t.runes=e}).catch(console.log)},methods:{typeSelected:function(){if(this.type!=this.prevType){switch(this.name="",this.prevName="",this.prevType=this.type,this.$emit("type-change",this.type),this.type){case"grass":this.selectedValues=this.grass.map(function(t){return{id:t.id,name:t.name}});break;case"animals":this.selectedValues=this.animals.map(function(t){return{id:t.id,name:t.name}});break;case"runes":this.selectedValues=this.runes.map(function(t){return{id:t.id,name:t.name}});break}this.names=this.selectedValues.map(function(t){return t.name})}},selectedName:function(){var t=this;this.name!=this.prevName&&(this.prevName=this.name,this.$emit("name-change",this.name),this.$emit("id-change",this.selectedValues.find(function(e){return e.name==t.name}).id))},clear:function(){this.type="",this.prevType="",this.name="",this.prevName="",this.id=1,this.quantity=1,this.selectedValues=[],this.names=[]}}}),g=_,C=(s("26aa"),Object(m["a"])(g,b,y,!1,null,"90f4dc8e",null)),k=C.exports,j={name:"Consumption",components:{ResourceSelection:k},data:function(){return{type:"",name:"",resultMessage:null,id:-1,number:1}},computed:{actionEnabled:function(){return this.number>0&&this.type&&this.name}},methods:{clear:function(){this.type="",this.name="",this.number=1,this.id=-1,this.resultMessage=null,this.$refs.selector.clear()},quantityChanged:function(t){this.number=t},typeChanged:function(t){this.type=t},nameChanged:function(t){this.name=t},idChanged:function(t){this.id=t},makeConsumption:function(){var t=this;this.resultMessage=null,this.type&&this.name?this.$store.dispatch("consumpt",{id:this.id,type:this.type,amount:this.number,isPlus:!1}).then(function(){var e="Успешно записан расход. Наименование: ".concat(t.name,". Количество: ").concat(t.number,".");t.clear(),t.resultMessage=e}).catch(function(e){console.log(e),t.resultMessage="Ошибка"}):this.resultMessage="Укажите категорию и наименование ресурса"},addResource:function(){var t=this;this.resultMessage=null,this.type&&this.name?this.number<0?this.resultMessage="Неверное количество. Введите количестов больше 0":this.$store.dispatch("consumpt",{id:this.id,type:this.type,amount:this.number,isPlus:!0}).then(function(){var e="Успешно записан приход. Наименование: ".concat(t.name,". Количество: ").concat(t.number,".");t.clear(),t.resultMessage=e}).catch(function(e){console.log(e),t.resultMessage="Ошибка"}):this.resultMessage="Укажите категорию и наименование ресурса"}}},x=j,w=(s("ed97"),Object(m["a"])(x,h,v,!1,null,null,null)),E=w.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"consumption-form"},[s("div",{staticClass:"md-title"},[t._v("Оформление заказа")]),s("div",{staticClass:"name selection"},[s("div",{staticClass:"md-layout"},[t._m(0),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},t._l(t.recipes,function(e){return s("md-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1)])]),s("div",{staticClass:"quantity selection"},[s("div",{staticClass:"md-layout"},[t._m(1),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-input",{attrs:{type:"number",min:"0",max:"10"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)])]),s("div",{staticClass:"phone"},[s("div",{staticClass:"md-layout"},[t._m(2),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-input",{attrs:{type:"text",placeholder:"+79817778394"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1)])]),s("div",{staticClass:"buttons-row"},[s("md-button",{staticClass:"md-raised left",attrs:{disabled:!t.enabledAction},on:{click:function(e){return t.makeOrder()}}},[t._v("Оформить")]),s("md-button",{staticClass:"md-raised right",on:{click:function(e){return t.clear()}}},[t._v("Очистить")])],1),t.resultMessage?s("div",[t._v(t._s(t.resultMessage))]):t._e()])},$=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Зелье")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Количество")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Телефон для связи")])])}],I={name:"Order",data:function(){return{id:0,number:0,phone:null,resultMessage:null,recipes:[]}},mounted:function(){this.fetchRecipes()},computed:{enabledAction:function(){return this.id>0&&this.number>0&&this.phone}},methods:{fetchRecipes:function(){var t=this;this.$store.dispatch("fetchRecipes").then(function(e){console.log("fetching recipes"),t.recipes=e}).catch(function(t){return console.log(t)})},clear:function(){this.id=void 0,this.number=0,this.phone=void 0},makeOrder:function(){var t=this;if(this.resultMessage=null,this.id<=0)this.resultMessage="Выберите зелье";else if(this.number<=0)this.resultMessage="Количестов должно быть больше 0";else{var e={potionId:this.id,quantity:this.number,clientLogin:this.$store.state.user.login,phone:this.phone};this.$store.dispatch("addOrder",e).then(function(){t.resultMessage="Заказ оформлен успешно",t.clear()}).catch(function(e){t.resultMessage="Ошибка",console.log(e)})}}}},O=I,S=Object(m["a"])(O,R,$,!1,null,null,null),M=S.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"report-container"},[s("md-tabs",[s("md-tab",{attrs:{id:"tab-consumptions","md-label":"Расходы",exact:""}},[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Период отчета (последних месяцев)")])]),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{attrs:{name:"period",id:"period","md-selected":t.periodSelected()},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}},t._l([1,2,3,6,9,12],function(e){return s("md-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1)],1)]),s("BaseReport",{attrs:{type:"consumption",period:t.selectedPeriod}})],1),s("md-tab",{attrs:{id:"tab-workload","md-label":"Загруженность"}},[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Сотрудник")])]),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{attrs:{name:"workloadEmployeeId",id:"workloadEmployeeId","md-selected":t.workloadEmployeeIdSelected()},model:{value:t.workloadEmployeeId,callback:function(e){t.workloadEmployeeId=e},expression:"workloadEmployeeId"}},[s("md-option",{attrs:{value:"-1"}},[t._v("Все")]),t._l(t.employees,function(e){return s("md-option",{key:e.login,attrs:{value:e.login}},[t._v(t._s(e.name))])})],2)],1)],1)]),t.showBaseWorkloadReport?s("BaseReport",{attrs:{type:"workload"}}):t._e(),t.showBaseWorkloadReport?t._e():s("BaseReport",{attrs:{type:"employee-workload",employee:t.selectedWorkloadEmployeeId}})],1),s("md-tab",{attrs:{id:"tab-kpi","md-label":"KPI"}},[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Сотрудник")])]),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{attrs:{name:"kpiEmployeeId",id:"kpiEmployeeId","md-selected":t.kpiEmployeeIdSelected()},model:{value:t.kpiEmployeeId,callback:function(e){t.kpiEmployeeId=e},expression:"kpiEmployeeId"}},t._l(t.employees,function(e){return s("md-option",{key:e.login,attrs:{value:e.login}},[t._v(t._s(e.name))])}),1)],1)],1)]),t.showKpiReport?s("BaseReport",{attrs:{type:"employee-kpi",employee:t.selectedKpiEmployeeId}}):t._e()],1)],1)],1)},q=[],A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.reportData.length>0?s("md-table",{staticClass:"main-table",attrs:{"md-card":""},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{},[s("md-table-cell",{attrs:{"md-label":"Параметр"}},[t._v(t._s(n.name))]),s("md-table-cell",{attrs:{"md-label":"Значение"}},[t._v(t._s(n.value))])],1)}}],null,!1,3095778336),model:{value:t.data.reportData,callback:function(e){t.$set(t.data,"reportData",e)},expression:"data.reportData"}},[s("md-table-toolbar",[s("h1",{staticClass:"md-title"},[t._v("Общие данные")])])],1):t._e(),s("h1",{staticClass:"md-title"},[t._v("Графики изменения показателей")]),s("div",{staticClass:"charts md-layout"},t._l(t.data.charts,function(t,e){return s("div",{key:e,staticClass:"md-layout-item"},[s("div",{staticClass:"employees-chart report-chart"},[s("line-chart",{attrs:{"chart-data":t}})],1)])}),0)],1)},P=[],z=s("1fca"),W=z["b"].reactiveProp,N={extends:z["a"],mixins:[W],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},F=["#0f52bf","#95a014","#ff52bf","#b5a014","#42f54e"],B=0,U=function(){B===F.length&&(B=0);var t=B;return B++,t},G=function(t){for(var e in t.charts)for(var s in t.charts[e].datasets)t.charts[e].datasets[s].backgroundColor=F[U()];return t},D={name:"BaseReport",props:["type","employee","period"],components:{LineChart:N},watch:{employee:function(t){this.fetchData()},period:function(t){this.fetchData()}},mounted:function(){this.fetchData()},data:function(){return{data:{reportData:[],charts:[]}}},methods:{fetchData:function(){var t=this;this.$store.dispatch("getBaseReport",{type:this.type,employeeId:this.employee,period:this.period}).then(function(e){B=0,t.data=G(e)}).catch(console.log)}}},K=D,L=(s("a2ab"),Object(m["a"])(K,A,P,!1,null,null,null)),V=L.exports,J={name:"Report",components:{BaseReport:V},data:function(){return{consumptionPeriod:1,workloadEmployeeId:"-1",selectedWorkloadEmployeeId:"-1",prevWorkloadEmployeeId:"",kpiEmployeeId:"-1",selectedKpiEmployeeId:"-1",prevKpiEmployeeId:"",employees:[],period:1,prevPeriod:1,selectedPeriod:1}},mounted:function(){var t=this;this.$store.dispatch("fetchUsers").then(function(e){t.employees=e.filter(function(t){return"employee"==t.role}),t.employees.push({login:"asdf",name:"masfas",role:"employee"})}).catch(console.log)},computed:{showBaseWorkloadReport:function(){return"-1"==this.selectedWorkloadEmployeeId},showKpiReport:function(){return"-1"!=this.selectedKpiEmployeeId}},methods:{workloadEmployeeIdSelected:function(){this.prevWorkloadEmployeeId!=this.workloadEmployeeId&&(this.prevWorkloadEmployeeId=this.workloadEmployeeId,this.selectedWorkloadEmployeeId=this.workloadEmployeeId)},kpiEmployeeIdSelected:function(){this.prevKpiEmployeeId!=this.kpiEmployeeId&&(this.prevKpiEmployeeId=this.kpiEmployeeId,this.selectedKpiEmployeeId=this.kpiEmployeeId)},periodSelected:function(){this.period!=this.prevPeriod&&(this.prevPeriod=this.period,this.selectedPeriod=this.period)}}},H=J,Q=Object(m["a"])(H,T,q,!1,null,null,null),X=Q.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-table",{staticClass:"main-table",attrs:{"md-card":""},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{},[s("md-table-cell",{attrs:{"md-label":"Имя"}},[t._v(t._s(n.name))]),s("md-table-cell",{attrs:{"md-label":"Должность"}},[t._v(t._s(n.role))]),s("md-table-cell",{attrs:{"md-label":""}},["employee"==n.role?s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.consumptionReport(n.login)}}},[t._v("Загруженность")]):t._e(),"employee"==n.role?s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.kpiReport(n.login)}}},[t._v("KPI")]):t._e()],1)],1)}}]),model:{value:t.users,callback:function(e){t.users=e},expression:"users"}},[s("md-table-toolbar",[s("h1",{staticClass:"md-title"},[t._v("Сотрудники")])])],1),s("div",[s("md-field",[s("label",{attrs:{for:"name"}},[t._v("Имя")]),s("md-input",{attrs:{id:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),s("md-field",[s("label",{attrs:{for:"role"}},[t._v("Должность")]),s("md-select",{attrs:{name:"role",id:"role"},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},[s("md-option",{attrs:{value:"Manager"}},[t._v("Менеджер")]),s("md-option",{attrs:{value:"Employee"}},[t._v("Сотрудник")])],1)],1),s("md-button",{staticClass:"md-raised",on:{click:t.addUser}},[t._v("Добавить")])],1)],1)},Z=[],tt={name:"Employees",mounted:function(){this.fetchData()},data:function(){return{users:[],role:void 0,name:void 0}},methods:{fetchData:function(){var t=this;this.$store.dispatch("fetchUsers").then(function(e){return t.users=e}).catch(console.log)},addUser:function(){var t=this;this.$store.dispatch("addUser",{login:this.name,role:this.role,password:123}).then(function(){t.role=void 0,t.name=void 0,t.fetchData()}).catch(function(){t.role=void 0,t.name=void 0})},consumptionReport:function(t){this.$router.push("/report/view?type=employee-workload&employeeId="+t)},kpiReport:function(t){this.$router.push("/report/view?type=employee-kpi&employeeId="+t)}}},et=tt,st=Object(m["a"])(et,Y,Z,!1,null,null,null),nt=st.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-toolbar",{staticClass:"md-large md-primary",attrs:{"md-elevation":"0"}},[s("div",[s("md-avatar",{staticClass:"md-avatar-icon md-large md-accent"},[s("img",{attrs:{src:t.img,onerror:"this.src='http://tiny.cc/vj3ahz'"}})])],1),s("div",{staticClass:"user-name"},[t._v(t._s(t.userName))])]),s("div",[t.isClient?s("ClientMenu"):t._e(),t.isEmployee?s("EmployeeMenu"):t._e(),s("md-divider"),t.isLoggedIn?s("md-button",{on:{click:function(e){return t.logout()}}},[t._v("Выйти")]):t._e()],1)],1)},it=[],rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-list",[s("md-list-item",{attrs:{to:"/order"}},[s("md-icon",[t._v("add_shopping_cart")]),s("span",{staticClass:"md-list-item-text"},[t._v("Оформить заказ")])],1),s("md-list-item",{attrs:{to:"/client-orders"}},[s("md-icon",[t._v("bookmarks")]),s("span",{staticClass:"md-list-item-text"},[t._v("Мои заказы")])],1)],1)],1)},ot=[],ct={name:"ClientMenu"},lt=ct,dt=Object(m["a"])(lt,rt,ot,!1,null,null,null),ut=dt.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-list",[s("md-list-item",{attrs:{to:"/receipts"}},[s("md-icon",[t._v("receipt")]),s("span",{staticClass:"md-list-item-text"},[t._v("Рецепты")])],1),s("md-list-item",{attrs:{to:"/grass"}},[s("md-icon",[t._v("spa")]),s("span",{staticClass:"md-list-item-text"},[t._v("Травы")])],1),s("md-list-item",{attrs:{to:"/animals"}},[s("md-icon",[t._v("adb")]),s("span",{staticClass:"md-list-item-text"},[t._v("Животные")])],1),s("md-list-item",{attrs:{to:"/runes"}},[s("md-icon",[t._v("photo_filter")]),s("span",{staticClass:"md-list-item-text"},[t._v("Руны")])],1)],1),s("md-divider"),t.isWorker?s("WorkerMenu"):t._e(),t.isManager?s("ManagerMenu"):t._e()],1)},ft=[],pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-list",[s("md-list-item",{attrs:{to:"/consumption"}},[s("md-icon",[t._v("arrow_downward")]),s("span",{staticClass:"md-list-item-text"},[t._v("Расход/Приход")])],1),s("md-list-item",{attrs:{to:"/orders"}},[s("md-icon",[t._v("shopping_cart")]),s("span",{staticClass:"md-list-item-text"},[t._v("Заказы")])],1)],1)],1)},ht=[],vt={name:"WorkerMenu"},bt=vt,yt=Object(m["a"])(bt,pt,ht,!1,null,null,null),_t=yt.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-list",[s("md-list-item",{attrs:{to:"/report"}},[s("md-icon",[t._v("bar_chart")]),s("span",{staticClass:"md-list-item-text"},[t._v("Отчеты")])],1),s("md-list-item",{attrs:{to:"/employees"}},[s("md-icon",[t._v("people")]),s("span",{staticClass:"md-list-item-text"},[t._v("Сотрудники")])],1)],1)],1)},Ct=[],kt={name:"ManagerMenu"},jt=kt,xt=Object(m["a"])(jt,gt,Ct,!1,null,null,null),wt=xt.exports,Et={name:"EmployeeMenu",components:{ManagerMenu:wt,WorkerMenu:_t},data:function(){return{isWorker:this.$store.getters.isWorker,isManager:this.$store.getters.isManager}}},Rt=Et,$t=Object(m["a"])(Rt,mt,ft,!1,null,"2b66d2b8",null),It=$t.exports,Ot={name:"Menu",components:{ClientMenu:ut,EmployeeMenu:It},data:function(){return{img:this.$store.state.user.pictureUrl,userName:this.$store.state.user.name,isEmployee:this.$store.getters.isEmployee,isClient:this.$store.getters.isClient}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){return t.$router.push("/auth")})}}},St=Ot,Mt=(s("ff8e"),Object(m["a"])(St,at,it,!1,null,null,null)),Tt=Mt.exports,qt={name:"Home",components:{Receipts:p,Consumption:E,Order:M,Report:X,Employees:nt,Menu:Tt}},At=qt,Pt=(s("25cf"),Object(m["a"])(At,r,o,!1,null,"e3f11d9a",null)),zt=Pt.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form"},[s("h1",{staticClass:"md-title"},[t._v("Вход")]),s("md-field",{attrs:{"md-clearable":""}},[s("label",[t._v("Логин")]),s("md-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.auth()}},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}})],1),s("md-field",{attrs:{"md-clearable":""}},[s("label",[t._v("Пароль")]),s("md-input",{attrs:{type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.auth()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("div",{staticClass:"buttons-row"},[s("md-button",{staticClass:"md-raised left",on:{click:function(e){return t.auth()}}},[t._v("Войти")]),s("md-button",{staticClass:"right"},[t._v("Забыли пароль?")])],1),t.error?s("div",[s("p",[t._v(t._s(t.error))])]):t._e()],1)},Nt=[],Ft={name:"Authorization",data:function(){return{login:null,password:null,error:""}},methods:{auth:function(){var t=this;this.error=null,this.login?this.password?this.$store.dispatch("auth",{login:this.login,password:this.password}).then(function(e){return t.processAuth(e)}).catch(function(e){t.error="Пользователь или пароль неверные"}):this.error="Заполните поле Пароль":this.error="Заполните поле Логин"},processAuth:function(t){switch(console.log(t),console.log("user"),t.role){case"employee":this.$router.push("/receipts");break;case"manager":this.$router.push("/report");break;case"client":this.$router.push("/client-orders");break}console.log(t.role)}}},Bt=Ft,Ut=(s("54cb"),Object(m["a"])(Bt,Wt,Nt,!1,null,null,null)),Gt=Ut.exports,Dt={name:"app",components:{Home:zt,Authorization:Gt}},Kt=Dt,Lt=Object(m["a"])(Kt,a,i,!1,null,null,null),Vt=Lt.exports,Jt=s("8c4f"),Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"resource-container"},[s("div",{staticClass:"text-search"},[s("div",{staticClass:"md-layout "},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-icon",[t._v("search")]),s("md-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterGrass()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-button",{staticClass:"md-raised",on:{click:t.filterGrass}},[t._v("Искать")])],1)])]),s("div",{staticClass:"table-container"},[s("md-table",{staticClass:"main-table",on:{"md-selected":t.onSelect},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{staticClass:"md-primary",attrs:{"md-selectable":"single"}},[s("md-table-cell",{attrs:{"md-label":"Название"}},[t._v(t._s(n.name))]),s("md-table-cell",{attrs:{"md-label":"Количество"}},[t._v(t._s(n.quantity))]),s("md-table-cell",{attrs:{"md-label":"Описание"}},[t._v(t._s(n.description))])],1)}}]),model:{value:t.filteredGrass,callback:function(e){t.filteredGrass=e},expression:"filteredGrass"}})],1),t.selected?s("div",{staticClass:"selected-info"},[s("md-card",[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v(t._s(t.selected.name))])])],1),s("md-card-content",[t._v("\n                "+t._s(t.selected.description)+"\n            ")]),s("md-card-actions",[s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.moreClick()}}},[t._v("Подробнее")])],1)],1)],1):t._e()])},Qt=[],Xt={name:"Grass",data:function(){return{grass:[],filteredGrass:[],selected:null,searchText:""}},mounted:function(){var t=this;this.$store.dispatch("fetchGrass").then(function(e){t.grass=e,t.filteredGrass=e}).catch(function(t){return console.log(t)})},methods:{moreClick:function(){this.$router.push("/info?type=grass&id=".concat(this.selected.id))},onSelect:function(t){this.selected=t},filterGrass:function(){var t=this;this.filteredGrass=this.grass,this.searchText&&(this.filteredGrass=this.grass.filter(function(e){return e.name.includes(t.searchText)}))}}},Yt=Xt,Zt=(s("b514"),Object(m["a"])(Yt,Ht,Qt,!1,null,"53b2a7b6",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("md-list",t._l(t.orders,function(e){return s("md-list-item",{key:e.id},[s("span",[t._v("Заказ №"+t._s(e.id))]),s("span",[t._v(t._s(e.potionName))]),s("span",[t._v(t._s(e.quantity)+" шт.")]),s("span",[t._v(t._s(t.getStatusName(e.status)))])])}),1)],1)},se=[],ne={name:"ClientOrders",data:function(){return{orders:[]}},mounted:function(){var t=this;this.$store.dispatch("fetchClientOrders").then(function(e){return t.orders=e}).catch(function(t){return console.log(t)})},methods:{getStatusName:function(t){switch(t){case 0:return"Принят";case 1:return"Готов к выдаче";case 2:return"Закрыт"}}}},ae=ne,ie=Object(m["a"])(ae,ee,se,!1,null,null,null),re=ie.exports,oe=s("cebc"),ce=s("2f62"),le=s("bc3a"),de=s.n(le),ue={auth:function(t){return de.a.post("http://localhost:8080/auth/signin",t)}},me={getAll:function(){return de.a.get("http://localhost:8080/api/resources/grass")}},fe={getAll:function(){return de.a.get("http://localhost:8080/api/resources/recipes")},cookByRecipe:function(t){return de.a.post("http://localhost:8080/api/resources/recipes/cook",t)},addReceipt:function(t){return de.a.post("http://localhost:8080/api/resources/recipes",t)}},pe={getUsers:function(){return de.a.get("http://localhost:8080/api/users")},createUser:function(t){var e=t.login,s=t.password,n=t.role;return de.a.post("http://localhost:8080/api/user",{login:e,password:s,role:n})}},he={getAll:function(){return de.a.get("http://localhost:8080/api/orders")},addOrder:function(t){return de.a.post("http://localhost:8080/api/orders",t)},getClientOrders:function(t){return de.a.get("http://localhost:8080/api/client/orders?clientLogin="+t)},updateStatus:function(t){return de.a.post("http://localhost:8080/api/orders/status",t)}},ve={getAll:function(){return de.a.get("http://localhost:8080/api/resources/runes")},enchantRune:function(t,e){return de.a.post("http://localhost:8080/api/resources/runes/enchant",{recipeId:t,userLogin:e})}},be={getAll:function(){return de.a.get("http://localhost:8080/api/resources/animals")}},ye={getResourceInfo:function(t,e){return de.a.get("http://localhost:8080/api/resources/info?type=".concat(t,"&id=").concat(e))},consumpt:function(t){return de.a.post("http://localhost:8080/api/resources/update_amount",t)}},_e={getBaseReport:function(){return de.a.get("http://localhost:8080/api/report/base")},getConsumptionReport:function(t){return de.a.get("http://localhost:8080/api/report/consumption?period="+t)},getWorkloadReport:function(){return de.a.get("http://localhost:8080/api/report/workload")},getEmployeeWorkloadReport:function(t){return de.a.get("http://localhost:8080/api/report/workload/employee?login="+t)},getEmployeeKpiReport:function(t){return de.a.get("http://localhost:8080/api/report/kpi/employee?login="+t)}};n["default"].use(ce["a"]);var ge=null;localStorage.user&&(ge=JSON.parse(localStorage.user));var Ce={user:ge,authError:""},ke={isLoggedIn:function(t){return!!t.user},isEmployee:function(t){return t.user&&"employee"==t.user.role||"manager"==t.user.role},isManager:function(t){return t.user&&"manager"==t.user.role},isWorker:function(t){return t.user&&"employee"==t.user.role},isClient:function(t){return t.user&&"client"==t.user.role}},je={setUser:function(t,e){t.user=e,localStorage.user=JSON.stringify(e)},setAuthError:function(t,e){t.authError=e}},xe={auth:function(t,e){e.login,e.password;return new Promise(function(s,n){ue.auth(e).then(function(e){t.commit("setUser",e.data),s(e.data)}).catch(function(t){return n(t)})})},logout:function(t){t.commit("setUser",null)},fetchRecipes:function(){return new Promise(function(t,e){fe.getAll().then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},fetchGrass:function(){return new Promise(function(t,e){me.getAll().then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},fetchUsers:function(){return new Promise(function(t,e){pe.getUsers().then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},addUser:function(t,e){return new Promise(function(t,s){pe.createUser(e).then(function(e){return t(e.data)}).catch(function(t){return s(t)})})},consumpt:function(t,e){return new Promise(function(s,n){ye.consumpt(Object(oe["a"])({},e,{userLogin:t.state.user.login})).then(function(t){return s(t.data)}).catch(function(t){return n(t)})})},fetchOrders:function(){return new Promise(function(t,e){he.getAll().then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},fetchClientOrders:function(t){return new Promise(function(e,s){he.getClientOrders(t.state.user.login).then(function(t){return e(t.data)}).catch(function(t){return s(t)})})},addOrder:function(t,e){return new Promise(function(t,s){he.addOrder(e).then(function(e){return t(e.data)}).catch(function(t){return s(t)})})},cookPotion:function(t,e){return new Promise(function(s,n){fe.cookByRecipe({recipeId:e,userLogin:t.state.user.login}).then(function(t){return s(t.data)}).catch(function(t){return n(t)})})},updateOrderStatus:function(t,e){return new Promise(function(t,s){he.updateStatus(e).then(function(){return t()}).catch(function(t){return s(t)})})},fetchRunes:function(){return new Promise(function(t,e){ve.getAll().then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},enchantRune:function(t,e){return new Promise(function(s,n){ve.enchantRune(e,t.state.user.login).then(function(){return s()}).catch(function(t){return n(t)})})},fetchAnimals:function(){return new Promise(function(t,e){be.getAll().then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},getResourceInfo:function(t,e){var s=e.type,n=e.id;return new Promise(function(t,e){ye.getResourceInfo(s,n).then(function(e){return t(e.data)}).catch(function(t){return e(t)})})},addReceipt:function(t,e){return new Promise(function(s,n){fe.addReceipt(Object(oe["a"])({},e,{userLogin:t.state.user.login})).then(function(){return s()}).catch(function(t){return n(t)})})},getBaseReport:function(t,e){var s=e.type,n=e.employeeId,a=e.period;return new Promise(function(t,e){switch(s){case"base":return _e.getBaseReport().then(function(e){return t(e.data)}).catch(function(t){return e(t)});case"consumption":return _e.getConsumptionReport(a).then(function(e){return t(e.data)}).catch(function(t){return e(t)});case"workload":return _e.getWorkloadReport().then(function(e){return t(e.data)}).catch(function(t){return e(t)});case"employee-workload":return _e.getEmployeeWorkloadReport(n).then(function(e){return t(e.data)}).catch(function(t){return e(t)});case"employee-kpi":return _e.getEmployeeKpiReport(n).then(function(e){return t(e.data)}).catch(function(t){return e(t)})}})}},we=new ce["a"].Store({state:Ce,mutations:je,actions:xe,getters:ke}),Ee=we,Re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"resource-container"},[s("div",{staticClass:"text-search"},[s("div",{staticClass:"md-layout "},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-icon",[t._v("search")]),s("md-input",{model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-button",{staticClass:"md-raised",on:{click:t.filterOrders}},[t._v("Искать")])],1)])]),s("div",{staticClass:"md-layout-item selector"},[s("div",{staticClass:"md-layout selector"},[s("md-field",[s("label",{attrs:{for:"status"}},[t._v("Статус")]),s("md-select",{attrs:{name:"status",id:"status"},model:{value:t.searchStatus,callback:function(e){t.searchStatus=e},expression:"searchStatus"}},[s("md-option",{attrs:{value:"-1"}},[t._v("Все")]),s("md-option",{attrs:{value:"0"}},[t._v("Принят")]),s("md-option",{attrs:{value:"1"}},[t._v("Готов к выдаче")]),s("md-option",{attrs:{value:"2"}},[t._v("Закрыт")])],1)],1)],1)]),s("div",{staticClass:"table-container"},[s("md-table",{staticClass:"main-table",scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{staticClass:"md-primary"},[s("md-table-cell",{attrs:{"md-label":"Заказ №"}},[t._v(t._s(n.id))]),s("md-table-cell",{attrs:{"md-label":"Зелье"}},[t._v(t._s(n.potionName))]),s("md-table-cell",{attrs:{"md-label":"Количество"}},[t._v(t._s(n.quantity))]),s("md-table-cell",{attrs:{"md-label":"Телефон"}},[t._v(t._s(n.phone))]),s("md-table-cell",{attrs:{"md-label":"Статус"}},[s("div",{staticClass:"md-layout-item selector status-field"},[s("md-field",[s("md-select",{attrs:{name:"status",id:"status","md-selected":t.updateStatus(n)},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"item.status"}},[s("md-option",{attrs:{value:"0",disabled:""}},[t._v("Принят")]),s("md-option",{attrs:{value:"1"}},[t._v("Готов к выдаче")]),s("md-option",{attrs:{value:"2"}},[t._v("Закрыт")])],1)],1)],1)])],1)}}]),model:{value:t.filteredOrders,callback:function(e){t.filteredOrders=e},expression:"filteredOrders"}})],1)])},$e=[],Ie={name:"Orders",data:function(){return{orders:[],filteredOrders:[],initialStatuses:{},searchText:"",searchStatus:""}},mounted:function(){var t=this;this.$store.dispatch("fetchOrders").then(function(e){for(var s in e)t.initialStatuses[e[s].id]=e[s].status;t.orders=e,t.filteredOrders=e}).catch(function(t){return console.log(t)})},methods:{updateStatus:function(t){if(this.initialStatuses[t.id]!=t.status){var e={orderId:t.id,newStatus:t.status};this.$store.dispatch("updateOrderStatus",e).catch(console.log)}},filterOrders:function(){var t=this,e=this.orders;this.searchText&&(e=this.orders.filter(function(e){return e.potionName.includes(t.searchText)})),this.searchStatus&&-1!=this.searchStatus&&(e=e.filter(function(e){return e.status==t.searchStatus})),this.filteredOrders=e}}},Oe=Ie,Se=(s("5e1a"),Object(m["a"])(Oe,Re,$e,!1,null,"3e420d2a",null)),Me=Se.exports,Te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"resource-container"},[s("div",{staticClass:"text-search"},[s("div",{staticClass:"md-layout "},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-icon",[t._v("search")]),s("md-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterRunes()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-button",{staticClass:"md-raised",on:{click:t.filterRunes}},[t._v("Искать")])],1)])]),s("div",{staticClass:"table-container"},[s("md-table",{staticClass:"main-table",on:{"md-selected":t.onSelect},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{staticClass:"md-primary",attrs:{"md-selectable":"single"}},[s("md-table-cell",{attrs:{"md-label":"Зачарована"}},[s("md-checkbox",{staticClass:"md-primary",attrs:{disabled:""},model:{value:n.enchanted,callback:function(e){t.$set(n,"enchanted",e)},expression:"item.enchanted"}})],1),s("md-table-cell",{attrs:{"md-label":"Название"}},[t._v(t._s(n.name))]),s("md-table-cell",{attrs:{"md-label":"Категория"}},[t._v(t._s(n.categories[0]))]),s("md-table-cell",{attrs:{"md-label":"На складе"}},[t._v(t._s(n.quantity))])],1)}}]),model:{value:t.filteredRunes,callback:function(e){t.filteredRunes=e},expression:"filteredRunes"}})],1),t.selected?s("div",{staticClass:"selected-info"},[s("md-card",[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v(t._s(t.selected.name))]),s("div",{staticClass:"md-subhead"},[t._v(t._s(t.selected.category))])])],1),s("md-card-content",[t._v("\n                "+t._s(t.selected.description)+"\n            ")]),s("md-card-actions",[!t.selected.enchanted&&t.isEmployee?s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.enchantClick()}}},[t._v("Зачаровать")]):t._e(),s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.moreClick()}}},[t._v("Подробнее")])],1)],1)],1):t._e(),s("md-dialog",{attrs:{"md-active":t.successEnchant},on:{"update:mdActive":function(e){t.successEnchant=e},"update:md-active":function(e){t.successEnchant=e}}},[s("div",{staticClass:"modal-content"},[s("div",[t._v("Руна зачарована успешно.")]),s("div",[t._v("Ее статус обновился.")])]),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){t.successEnchant=!1}}},[t._v("Ок")])],1)],1)],1)},qe=[],Ae={name:"Runes",data:function(){return{selected:null,runes:[],filteredRunes:[],successEnchant:!1,searchText:"",isEmployee:this.$store.getters.isEmployee}},mounted:function(){this.fetchRunes()},methods:{onSelect:function(t){this.selected=t},moreClick:function(){this.$router.push("/info?type=runes &id=".concat(this.selected.id))},enchantClick:function(){var t=this;this.$store.dispatch("enchantRune",this.selected.id).then(function(){t.successEnchant=!0,t.fetchRunes()}).catch(console.log)},fetchRunes:function(){var t=this;this.$store.dispatch("fetchRunes").then(function(e){for(var s in e)e[s].enchanted=e[s].quantity>0;t.runes=e,t.filteredRunes=e}).catch(console.log)},filterRunes:function(){var t=this;this.filteredRunes=this.runes,this.searchText&&(this.filteredRunes=this.runes.filter(function(e){return e.name.includes(t.searchText)}))}}},Pe=Ae,ze=(s("09a8"),Object(m["a"])(Pe,Te,qe,!1,null,"168ae93e",null)),We=ze.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"resource-container"},[s("div",{staticClass:"text-search"},[s("div",{staticClass:"md-layout "},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-icon",[t._v("search")]),s("md-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterAnimals()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1),s("div",{staticClass:"md-layout-item"},[s("md-button",{staticClass:"md-raised",on:{click:t.filterAnimals}},[t._v("Искать")])],1)])]),s("div",{staticClass:"table-container"},[s("md-table",{staticClass:"main-table",on:{"md-selected":t.onSelect},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{staticClass:"md-primary",attrs:{"md-selectable":"single"}},[s("md-table-cell",{attrs:{"md-label":"Название"}},[t._v(t._s(n.name))]),s("md-table-cell",{attrs:{"md-label":"Количество"}},[t._v(t._s(n.quantity))]),s("md-table-cell",{attrs:{"md-label":"Описание"}},[t._v(t._s(n.description))])],1)}}]),model:{value:t.filteredAnimals,callback:function(e){t.filteredAnimals=e},expression:"filteredAnimals"}})],1),t.selected?s("div",{staticClass:"selected-info"},[s("md-card",[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v(t._s(t.selected.name))])])],1),s("md-card-content",[t._v("\n                "+t._s(t.selected.description)+"\n            ")]),s("md-card-actions",[s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.moreClick()}}},[t._v("Подробнее")])],1)],1)],1):t._e()])},Fe=[],Be={name:"Animals",data:function(){return{animals:[],filteredAnimals:[],selected:null,searchText:""}},mounted:function(){var t=this;this.$store.dispatch("fetchAnimals").then(function(e){t.animals=e,t.filteredAnimals=e}).catch(function(t){return console.log(t)})},methods:{moreClick:function(){this.$router.push("/info?type=animals&id=".concat(this.selected.id))},onSelect:function(t){this.selected=t},filterAnimals:function(){var t=this;this.filteredAnimals=this.animals,this.searchText&&(this.filteredAnimals=this.animals.filter(function(e){return e.name.includes(t.searchText)}))}}},Ue=Be,Ge=(s("3602"),Object(m["a"])(Ue,Ne,Fe,!1,null,"2f746e00",null)),De=Ge.exports,Ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("md-button",{on:{click:function(e){return t.back()}}},[s("md-icon",[t._v("arrow_back")])],1),s("h2",{staticClass:"header"},[t._v("Информация о ресурсе")])],1),s("span"),s("div",{staticClass:"container"},[s("div",{staticClass:"label"},[t._v("\n            Название\n        ")]),s("div",{staticClass:"value"},[t._v("\n            "+t._s(t.info.name)+"\n        ")])]),s("div",{staticClass:"container"},[s("div",{staticClass:"label"},[t._v("\n            Описание\n        ")]),s("div",{staticClass:"value"},[t._v("\n            "+t._s(t.info.description)+"\n        ")])]),s("div",{staticClass:"container"},[s("div",{staticClass:"label"},[t._v("\n            Количество на складе\n        ")]),s("div",{staticClass:"value"},[t._v("\n            "+t._s(t.info.quantity)+"\n        ")])]),s("div",{staticClass:"table-container"},[s("md-table",{staticClass:"main-table",scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return s("md-table-row",{staticClass:"md-primary"},[s("md-table-cell",{attrs:{"md-label":"Кто добыл"}},[t._v(t._s(n.userId))]),s("md-table-cell",{attrs:{"md-label":"Количество"}},[t._v(t._s(n.change))]),s("md-table-cell",{attrs:{"md-label":"Дата"}},[t._v(t._s(n.date))])],1)}}]),model:{value:t.info.history,callback:function(e){t.$set(t.info,"history",e)},expression:"info.history"}})],1)])},Le=[],Ve={name:"ResourceInfo",data:function(){return{info:{name:"",description:"",quantity:0,history:[]}}},mounted:function(){var t=this,e=this.$route.query.type,s=this.$route.query.id;this.$store.dispatch("getResourceInfo",{type:e,id:s}).then(function(e){t.info=e}).catch(console.log)},methods:{back:function(){this.$router.go(-1)}}},Je=Ve,He=(s("db10"),Object(m["a"])(Je,Ke,Le,!1,null,"a492e9ae",null)),Qe=He.exports,Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"add-receipt-form"},[s("div",{staticClass:"md-title"},[t._v("Добавление рецепта")]),s("div",{staticClass:"name-input"},[s("div",{staticClass:"md-layout"},[t._m(0),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-input",{attrs:{name:"name",id:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)])]),s("div",{staticClass:"description-input"},[s("div",{staticClass:"md-layout"},[t._m(1),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-input",{attrs:{name:"description",id:"description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1)])]),s("div",{staticClass:"category selection"},[s("div",{staticClass:"md-layout"},[t._m(2),s("div",{staticClass:"md-layout-item selector"},[s("md-field",[s("md-select",{attrs:{name:"category",id:"category"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[s("md-option",{attrs:{value:"Несмертельные"}},[t._v("Несмертельные")]),s("md-option",{attrs:{value:"Смертельные"}},[t._v("Смертельные")]),s("md-option",{attrs:{value:"Усиливающие"}},[t._v("Усиливающие")])],1)],1)],1)])]),s("div",{staticClass:"instruction-input"},[s("div",{staticClass:"md-layout"},[t._m(3),s("div",{staticClass:"md-layout-item"},[s("md-field",[s("md-input",{attrs:{name:"instruction",id:"instruction"},model:{value:t.instruction,callback:function(e){t.instruction=e},expression:"instruction"}})],1)],1)])])]),s("div",{staticClass:"table-container"},[t.ingredients.length>0?s("div",{staticClass:"label"},[s("div",{staticClass:"md-subtitle"},[t._v("Ингридиенты")])]):t._e(),s("md-list",t._l(t.ingredients,function(e,n){return s("md-list-item",{key:n},[s("span",[t._v(t._s(t.getTypeName(e.type)))]),s("span",[t._v(t._s(e.name))]),s("span",[t._v(t._s(e.requiredQuantity)+" шт.")]),s("span",[s("md-button",{on:{click:function(e){return t.removeIngredient(n)}}},[s("md-icon",[t._v("close")])],1)],1)])}),1)],1),s("div",[s("md-button",{staticClass:"md-raised left",on:{click:function(e){t.addingIngredient=!0}}},[t._v("Добавить ингредиент")])],1),s("div",{staticClass:"buttons-row"},[s("md-button",{staticClass:"md-raised left",attrs:{disabled:!t.actionEnabled},on:{click:function(e){return t.addReceipt()}}},[t._v("Добавить рецепт")]),s("md-button",{staticClass:"md-raised right",on:{click:function(e){return t.clear()}}},[t._v("Очистить")])],1),t.resultMessage?s("div",{staticClass:"result"},[t._v(t._s(t.resultMessage))]):t._e(),s("md-dialog",{attrs:{"md-active":t.addingIngredient},on:{"update:mdActive":function(e){t.addingIngredient=e},"update:md-active":function(e){t.addingIngredient=e}}},[s("div",{staticClass:"modal-content resource-form"},[s("ResourceSelection",{on:{"quantity-change":t.quantityChanged,"type-change":t.typeChanged,"name-change":t.nameChanged,"id-change":t.idChanged}})],1),s("md-dialog-actions",[s("md-button",{staticClass:"md-primary",on:{click:function(e){return t.cancelAddIngredient()}}},[t._v("Отмена")]),s("md-button",{staticClass:"md-primary",attrs:{disabled:!t.validIngredientForm},on:{click:function(e){return t.finishAddIngredient()}}},[t._v("Ок")])],1)],1)],1)},Ye=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Название")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Описание")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Категория")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout-item label"},[s("div",{staticClass:"md-subtitle"},[t._v("Инструкции")])])}],Ze={name:"AddReceipt",components:{ResourceSelection:k},data:function(){return{name:"",description:"",instruction:"",category:"",ingredients:[],resultMessage:"",addingIngredient:!1,ingredientForm:{type:"",name:"",id:-1,quantity:1}}},computed:{actionEnabled:function(){return this.category&&this.description&&this.instruction&&this.name&&this.ingredients.length>0},validIngredientForm:function(){return this.ingredientForm.type&&this.ingredientForm.name&&this.ingredientForm.id>0&&this.ingredientForm.quantity>0}},methods:{clear:function(){this.name="",this.description="",this.instruction="",this.category="",this.ingredients=[],this.resultMessage=""},finishAddIngredient:function(){this.ingredients.push({type:this.ingredientForm.type,name:this.ingredientForm.name,id:this.ingredientForm.id,requiredQuantity:parseInt(this.ingredientForm.quantity)}),this.addingIngredient=!1,this.ingredientForm={type:"",name:"",id:-1,quantity:1}},cancelAddIngredient:function(){this.addingIngredient=!1,this.ingredientForm={type:"",name:"",id:-1,quantity:1}},removeIngredient:function(t){this.ingredients.splice(t)},quantityChanged:function(t){this.ingredientForm.quantity=t},typeChanged:function(t){this.ingredientForm.type=t},nameChanged:function(t){this.ingredientForm.name=t},idChanged:function(t){this.ingredientForm.id=t},getTypeName:function(t){switch(t){case"animals":return"Животное";case"grass":return"Трава";case"runes":return"Руна"}},addReceipt:function(){var t=this,e={name:this.name,description:this.description,instruction:this.instruction,ingredients:this.ingredients};this.$store.dispatch("addReceipt",e).then(function(){var e="Успешно добавлен рецепт ".concat(t.name,".");t.clear(),t.resultMessage=e}).catch(function(e){console.log(e),t.resultMessage="Ошибка"})}}},ts=Ze,es=(s("755e"),Object(m["a"])(ts,Xe,Ye,!1,null,"2f23ede5",null)),ss=es.exports,ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("md-button",{on:{click:function(e){return t.back()}}},[s("md-icon",[t._v("arrow_back")])],1)],1),s("div",[s("BaseReport",{attrs:{type:t.type,employee:t.employeeId}})],1)])},as=[],is={name:"ReportView",components:{BaseReport:V},data:function(){return{type:this.$route.query.type,employeeId:this.$route.query.employeeId}},methods:{back:function(){this.$router.go(-1)}}},rs=is,os=Object(m["a"])(rs,ns,as,!1,null,"228741de",null),cs=os.exports;n["default"].use(Jt["a"]);var ls=[{path:"/",name:"home",component:zt,children:[{name:"receipts",path:"/receipts",component:p},{name:"grass",path:"/grass",component:te},{name:"consumption",path:"/consumption",component:E},{name:"report",path:"/report",component:X},{name:"Employees",path:"/employees",component:nt},{name:"order",path:"/order",component:M},{name:"client-orders",path:"/client-orders",component:re},{name:"orders",path:"/orders",component:Me},{name:"runes",path:"/runes",component:We},{name:"animals",path:"/animals",component:De},{name:"info",path:"/info",component:Qe},{name:"addReceipt",path:"/receipts/add",component:ss},{name:"reportView",path:"report/view",component:cs}]},{path:"/auth",name:"auth",component:Gt}],ds=new Jt["a"]({routes:ls,mode:"history"}),us=["auth","client-orders","order"];ds.beforeEach(function(t,e,s){if(Ee.getters.isLoggedIn||"auth"===t.name)return Ee.getters.isClient&&!us.includes(t.name)&&"/auth"!=t.path?void s("/order"):void s();s("/auth")});var ms=ds,fs=s("43f9"),ps=s.n(fs);s("51de"),s("e094"),s("c789"),s("5f84");n["default"].use(ps.a),n["default"].config.productionTip=!1,new n["default"]({router:ms,store:Ee,render:function(t){return t(Vt)}}).$mount("#app")},"589a":function(t,e,s){},"5e1a":function(t,e,s){"use strict";var n=s("1203"),a=s.n(n);a.a},6378:function(t,e,s){},"65a7":function(t,e,s){},"683f":function(t,e,s){},"755e":function(t,e,s){"use strict";var n=s("65a7"),a=s.n(n);a.a},a2ab:function(t,e,s){"use strict";var n=s("6378"),a=s.n(n);a.a},abfc:function(t,e,s){},b514:function(t,e,s){"use strict";var n=s("0232"),a=s.n(n);a.a},d1ba:function(t,e,s){},db10:function(t,e,s){"use strict";var n=s("683f"),a=s.n(n);a.a},ed97:function(t,e,s){"use strict";var n=s("12d1"),a=s.n(n);a.a},fcaa:function(t,e,s){},ff8e:function(t,e,s){"use strict";var n=s("d1ba"),a=s.n(n);a.a}});
//# sourceMappingURL=app.c49e42e7.js.map